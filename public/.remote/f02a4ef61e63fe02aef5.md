---
title: 【Ruby】Rubyにおける大小関係を理解する
tags:
  - Ruby
  - 初心者
  - 未経験エンジニア
  - 独学
private: false
updated_at: '2024-11-15T01:33:45+09:00'
id: f02a4ef61e63fe02aef5
organization_url_name: null
slide: false
ignorePublish: false
---
# はじめに
こんにちは！アメリカの大学で語学を学びながら、独学でソフトウェアエンジニアを目指している者です。
今回は、Rubyにおける文字列の大小比較について解説していきます。
Rubyでは文字列を比較する際、五十音順や辞書順ではなく、文字コード順に基づいて評価されるのが特徴です。
この基準を理解すると、文字列や数値の比較や並べ替えを行う際の挙動がわかりやすくなります。さっそく、Rubyならではの大小比較のポイントを詳しく見ていきましょう！

# 比較の基本
Rubyで文字列同士を比較する際は、内部的に文字コード（`ASCII`や`UTF-8`など）に基づいて比較が行われます。
そのため、アルファベットや数字、記号の順序も文字コードの値に沿ったものとなります。
Rubyでの一般的な文字列の比較順序は以下の通りです

1. 特定の記号（例: 空白, `!`, `#` など）
2. 数字（例: `0 〜 9`）
3. 大文字のアルファベット（例: `A 〜 Z`）
4. 小文字のアルファベット（例: `a 〜 z`）

この順序で比較が行われるため、数字はアルファベットよりも小さいと評価されますが、一部の記号（`!`や`#`など）は数字よりもさらに小さいと評価されます。

では、具体的な例を使って見てみましょう。

```ruby
p "0" < "A"      # => true（数字 "0" はアルファベット "A" より小さい）
p "A" < "a"      # => true（大文字 "A" は小文字 "a" より小さい）
p "!" < "0"      # => true（記号 "!" は数字 "0" より小さい）
p "#" < "0"      # => true（記号 "#" も数字 "0" より小さい）
p " " < "!"      # => true（空白はほとんどの記号よりも小さい）
```

# 日本語文字列の比較基準
Rubyで日本語の文字列を比較する場合も、英数字と同様に文字コードに基づいて評価されます。
ただし、日本語文字の文字コードはアルファベットや数字よりも大きいため、通常は「英数字 < 日本語」という順序になります。
また、一般的には以下の順序で評価されます：

1. ひらがな
2. カタカナ
3. 漢字(ひらがなより小さい漢字もある)

実際のコードで確認してみましょう。

```ruby
p "あ" < "ア"    # => true（ひらがな "あ" はカタカナ "ア" より小さい）
p "ア" < "亜"    # => true（カタカナ "ア" は漢字 "亜" より小さい）
p "A" < "あ"      # => true（アルファベット "A" は日本語の "あ" より小さい）
p "0" < "あ"      # => true（数字 "0" は日本語の "あ" より小さい）
```
このように、日本語では通常、ひらがな < カタカナ < 漢字の順で評価され、アルファベットや数字と比較した場合は、英数字が日本語文字よりも小さいと評価されます。
しかし、特定の規則で日本語の比較順を決めることは難しく、比較の挙動については「UTF-8のバイト順序に基づく」ということを理解するのがいいと思います。

https://www.seiai.ed.jp/sys/text/java/utf8table.html

# まとめ
Rubyでの文字列の大小比較では、文字コード順に基づく評価が行われるため、以下のような順序で比較が行われます

1. 特定の記号（空白, `!`, `#` など）
2. 数字
3. 大文字のアルファベット
4. 小文字のアルファベット
5. ひらがな
6. カタカナ
7. 漢字(ひらがなよりも小さい漢字もある)


この順序を理解することで、より正確に文字列の比較やソートを行えるようになります。
上記でも伝えましたが、日本語での比較順を決める場合に漢字がひらがなよりも小さいことがあるので、UTF-8のバイト順序に基づくと覚えておきましょう。
このようにRubyでの文字列比較を使って、ソートや条件分岐を行う際の参考にしてみてください！

