---
title: 【Ruby】正規表現の入門
tags:
  - Ruby
  - 正規表現
  - 初心者
  - 未経験エンジニア
  - 独学
private: false
updated_at: '2024-11-19T15:53:49+09:00'
id: 46840ab6ab9101278ec2
organization_url_name: null
slide: false
ignorePublish: false
---
# はじめに
こんにちは！アメリカの大学で語学を学びながら、独学でソフトウェアエンジニアを目指している者です。
正規表現について勉強していますが、覚えることが多く、自分の中でも整理しようとこの記事を作成しました。

この記事では、正規表現の基本構文から実際の利用例までを分かりやすく解説します。正規表現初心者の方に役立つ内容を目指しました！

# 正規表現とは？
正規表現（Regular Expression）は、文字列のパターンを指定して検索や置換を行うための便利な記法です。
例えば以下のような用途に利用できます

* 特定形式のデータ検出（メールアドレス、電話番号など）
* パターンマッチングによるデータフィルタリング
* 文字列の置換

Rubyでは、正規表現リテラルはスラッシュ / で囲んで表現します。例えば
```Ruby
puts "hello" =~ /hello/  # => 0（文字列"hello"に一致）
```
# 正規表現の基本記号

### `.（任意の1文字）`
`.`は改行以外の任意の1文字に一致します。
```ruby
puts "cat" =~ /c.t/  # => 0（c と t の間に任意の文字がある）
puts "ct" =~ /c.t/   # => nil（任意の文字がない）
```

### `*（直前の文字が0回以上繰り返し）`
`*` は直前の文字が0回以上繰り返される部分に一致します。
```ruby
puts "aaa" =~ /a*/ # => 0（a が0回以上繰り返される）
puts "bbb" =~ /a*/ # => 0（a が0回でも良いのでマッチ）
```
### `+（直前の文字が1回以上繰り返し）`
`+` は直前の文字が1回以上繰り返される部分に一致します。
```ruby
puts "aaa" =~ /a+/ # => 0（a が1回以上繰り返される）
puts "bbb" =~ /a+/ # => nil（a が1回以上ないのでマッチしない）
```

### `?（直前の文字が0回または1回）`
`?` は直前の文字が0回または1回に一致します。
```ruby
puts "ab" =~ /ac?/  # => 0（c が0回でも良い）
puts "abc" =~ /ac?/ # => 0（c が1回でも良い）
puts "abcc" =~ /ac?/ # => 0（最初の c だけにマッチ）
```

### `[]（文字クラス）`
`[]` を使うと、指定した文字のいずれか1つに一致します。
```ruby
puts "apple" =~ /[aeiou]/ # => 0（母音にマッチ）
puts "sky" =~ /[aeiou]/   # => nil（母音がない）
```
範囲指定も可能です。
```ruby
puts "5" =~ /[0-9]/ # => 0（数字にマッチ）
puts "A" =~ /[A-Z]/ # => 0（大文字にマッチ）
```
### `()（グループ化）`
`()` を使うと、部分パターンをグループ化して扱えます。
また、キャプチャ（抽出）として利用できます。
```
/(a+b)/ =~ "aaab"
puts $1  # => "aaab"（キャプチャされた部分）
```
ここで、`(a+b)`は足し算ではなく`a`を1回以上繰り返すという意味なので注意しましょう。

### `アンカー（^ と $）`
`^` は文字列の先頭を示し、`$` は文字列の末尾を示します。

### エスケープ文字
特別な意味を持つ記号（例：`+, ., *`）を通常の文字として扱う場合、\ を使ってエスケープします。

```ruby
puts "1+1=2" =~ /\+/ # => 1（+ にマッチ）
puts "a.b" =~ /\./   # => 1（. にマッチ）
```


# 実際の利用例 
いくつか正規表現を見てきましたが、具体例を挙げてみようと思います。

これはメールアドレスに一致する正規表現の例です。
```ruby
email = "example@example.com"
puts email =~ /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i # => 0（マッチ）
```
* `\A`
文字列の先頭を示します。このパターンは、文字列全体が条件に一致することを要求します。
* `[\w+\-.]+`
アルファベット、数字、アンダースコア（`_`）、プラス記号（`+`）、ハイフン（`-`）、ドット（`.`）を1文字以上連続して含む部分に一致します。
この部分はメールアドレスのローカル部（@の前の部分）に対応します。
* `@`
`@`そのものに一致します。
* `[a-z\d\-.]+`
アルファベット小文字、数字、ハイフン（-）、ドット（.）を1文字以上含む部分に一致します。
これはドメイン名部分（`@`の後ろの部分）を表します。
* `\.[a-z]+`
ドット（.）の後に続くアルファベット小文字1文字以上に一致します。
これはトップレベルドメイン（例: .com, .org）を表します。
* `\z`
文字列の末尾を示します。これにより、文字列全体が完全に条件に一致する必要があります。
* `i`：大文字小文字を区別しないオプションです

日本の電話番号に一致する例です。
```ruby
phone = "090-1234-5678"
puts phone =~ /\A\d{3}-\d{4}-\d{4}\z/ # => 0（マッチ）
```
* `\A`
文字列の先頭を示します。この場合のちに数字を表す`\d`が来るので、先頭は数字である必要があります。
* `\d{3}`
数字（\d）が3文字続く部分に一致します。これは電話番号の市外局番（例: 090）に対応します。
* `-`
ハイフンそのものに一致します。
`\d{4}`
数字が4文字続く部分に一致します。これは電話番号の中央部分（例: 1234）に対応します。
* `\d{4}`（最後の部分）
数字が4文字続く部分に一致します。これは電話番号の末尾部分（例: 5678）に対応します。
* `\z`
文字列の末尾を示します。
つまり文字列の最後が数字が4文字になるという意味になります。

# まとめ
いくつか上記で正規表現を紹介しました。
正規表現は最初は慣れない(わたしも現在進行形で勉強中)ので覚えるというよりパターンに慣れたほうが早く使いこなせそうです。
ruby以外でも正規表現は使うようなので、しっかりマスターしていきたいと思います。
今回のまとめの記事が正規表現初心者の方の参考になっていただければ幸いです。
