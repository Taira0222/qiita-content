---
title: 【Ruby】継承とmoduleの使い分け
tags:
  - Ruby
  - 継承
  - module
  - 未経験エンジニア
private: false
updated_at: ''
id: null
organization_url_name: null
slide: false
ignorePublish: false
---
# はじめに
こんにちは、progateでRubyを勉強したのち「ゼロからわかるRuby超入門」を勉強しています。
その中でもスーパークラスの要素を子クラスに引き継ぐ継承と、`module`の両方を勉強すると、「`module`なくても継承だけでよくない？」と思うようになったのでその違いや使い分けについて本日は解説していきたいと思います

# 継承とは
継承は、あるクラスが他のクラスの属性やメソッドを「引き継ぐ」仕組みです。
サブクラス (子クラス) がスーパークラス (親クラス) のすべてのメソッドや変数を継承し、必要に応じてオーバーライドすることができます。
継承の特徴は以下の通りです
* Rubyでは1つのクラスしか継承できない
* クラス間に明確な親子関係があり、サブクラスはスーパークラスのすべての機能を継承する
* サブクラスで親クラスのメソッドを上書きできる(オーバーライド)
* スーパークラスのインスタンス変数や状態も引き継がれる

では、継承はどのような場合に使うのでしょうか
* 自然な親子関係があるとき
たとえば、「犬」や「猫」などの動物が「動物」という概念に含まれるとき。
* 属性を共有する必要があるとき
親クラスが持っているデータや振る舞いをサブクラスが「必ず」持っているとき

継承という名の通り、同じようなものである必要があるのでパンとスマホとか全く関係ない要素同士の場合は継承をしない方がよいということです。
```ruby:inheritance.rb
class Animal
  def speak
    "動物の鳴き声"
  end
end

class Dog < Animal
  def speak
    "ワンワン"
  end
end

class Cat < Animal
  def speak
    "ニャーニャー"
  end
end
```
この例では、Animal クラスは speak という共通のメソッドを持っており、それを Dog と Cat というサブクラスが「それぞれの鳴き声」に合わせてオーバーライドしています。
<strong>「犬は動物である」</strong>という明確な親子関係があるので、継承は理にかなっています。

# `module`とは
`module`は、機能 (メソッド) の「共有」を目的としています。複数のクラスで同じ機能を使いたい場合に、継承ではなく`module`をミックスインすることで、その機能を「借りる」形で利用できます。
これも上にならって特徴を見てみましょう。
* 複数の`module`を1つのクラスに取り込むことができる
* クラスの階層構造を作らない(親子関係がない)
* 複数のクラスに共通の機能を提供するのに適している
* `module`はメソッドのみを提供し、状態（インスタンス変数）は持たない

では`module`を使う場面についても見ていきましょう
* 複数のクラスに共通のメソッドを追加したいとき
そのメソッドはクラス間で共通していても、クラス同士の親子関係が必要ない場合。
* 機能を柔軟に追加したいとき
継承は1回だけしかできませんが、モジュールなら複数の機能を柔軟に追加できます。

親子関係が必要なく、複数のクラスで使いたい場合に使えそうだなということがここからの記述でわかりますよね。
```ruby:module.rb
module Swimmable
  def swim
    "泳いでいます"
  end
end

class Dog
  include Swimmable
end

class Human
  include Swimmable
end
```
ここでは、Dog と Human が 「泳ぐ」という共通の機能 を持っていますが、<strong>「犬は人間である」</strong>という関係はありません。
そこで、モジュールを使って swim メソッドを共有しています。
クラス同士に親子関係は必要なく、ただ機能を共有したいときにモジュールを使います。

# まとめ
いかがだったでしょうか。ややこしいですが、属性の違いについて着目するということが重要であると思います。
上記の内容を簡単にまとめておきます
### 継承を使うべきケース
* クラス間に明確な親子関係があるとき（「犬は動物である」など）
* 親クラスの状態 (インスタンス変数) や振る舞いを引き継ぎたいとき
* サブクラスが親クラスの基本的な機能を拡張したりオーバーライドする必要があるとき

### `module`を使うべきケース
* 親子関係がない複数のクラスに共通の機能を提供したいとき（「犬は人間ではないが、どちらも泳ぐことができる」など）。
* 複数の機能を自由に追加したいとき（モジュールは複数同時に include できる）
* 状態（インスタンス変数）を持たない単純な機能を追加したいとき
